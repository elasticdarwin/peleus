


#{fixture delete:'all', load:'fixtures.yml' /}


#{selenium 'Test User Join'}
clearSession()

open(@@{backyard.ShareSessionController.index()})
assertElementPresent('//tr[@class="session_1"]//input[@value="publish"]')

clickAndWait('//tr[@class="session_1"]/td/a[@class="show"]')
assertTextPresent('Gof Design Patterns with Java')
assertTextPresent('Status: CREATED')


assertElementPresent('//input[@value="publish"]')
clickAndWait('//input[@value="publish"]')
assertLocation(@@{backyard.ShareSessionController.show(1)})

assertTextPresent('Status: PUBLISHED')

assertElementPresent('//input[@value="close"]')
clickAndWait('//input[@value="close"]')

assertLocation(@@{backyard.ShareSessionController.show(1)})

assertTextPresent('Status: CLOSED')

assertTextPresent('delete')

clickAndWait('link=delete')
assertTextPresent('Yes')
assertTextPresent('Cancel')

clickAndWait('link=Cancel')

assertLocation(@@{backyard.ShareSessionController.index()})

assertTextPresent('Gof Design Patterns with Java')


clickAndWait('//tr[@class="session_1"]//a[@class="delete"]')
assertTextPresent('Yes')
assertTextPresent('Cancel')
clickAndWait('link=Yes')
assertTextNotPresent('Gof Design Patterns with Java')

#{/selenium}