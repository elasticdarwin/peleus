


#{fixture delete:'all', load:'fixtures.yml' /}


#{selenium 'Test User Join'}
clearSession()

open(@@{backyard.ShareSessionController.index()})
assertElementPresent('//tr[@class="session_1"]//input[@value="发布"]')

clickAndWait('//tr[@class="session_1"]/td/a[@class="show"]')
assertTextPresent('Gof Design Patterns with Java')
assertTextPresent('状态: CREATED')


assertElementPresent('//input[@value="发布"]')
clickAndWait('//input[@value="发布"]')
assertLocation(@@{backyard.ShareSessionController.show(1)})

assertTextPresent('状态: PUBLISHED')

assertElementPresent('//input[@value="关闭"]')
clickAndWait('//input[@value="关闭"]')

assertLocation(@@{backyard.ShareSessionController.show(1)})

assertTextPresent('状态: CLOSED')

assertTextPresent('删除')

clickAndWait('link=删除')
assertTextPresent('确认')
assertTextPresent('取消')

clickAndWait('link=取消')

assertLocation(@@{backyard.ShareSessionController.index()})

assertTextPresent('Gof Design Patterns with Java')


clickAndWait('//tr[@class="session_1"]//a[@class="delete"]')
assertTextPresent('确认')
assertTextPresent('取消')
clickAndWait('link=确认')
assertTextNotPresent('Gof Design Patterns with Java')

#{/selenium}