#{extends 'main.html' /}
#{set title:'Welcome and Join the community!' /}

<div id="peleusContent">


    <form class="centerStyleForm" action="@{myspace.user.UserFacade.register()}" method="post">

        <h3>&{'myspace.user.join.subject'}</h3>


        <label>&{'myspace.user.name'}</label>
        <input type="text"  name="user_form.name" value="${flash['user_form.name']}"/>
        <span class="flashError">#{error 'user_form.name' /}</span>
        <br />

        <label>&{'myspace.user.department'}</label>
        <select name="user_form.department_id">
        #{list items:departments, as:'department'}
            #{if flash['user_form.department_id'] == department.id}
                <option value="${department.id}" selected="selected">${department.name}</option>
            #{/if}
            #{else}
                <option value="${department.id}">${department.name}</option>
            #{/else}
        #{/list}
        </select>
        <span class="flashError">#{error 'user_form.department_id' /}</span>
        <br />


        <label>&{'myspace.user.email'}</label>
        <input type="text"  name="user_form.email" value="${flash['user_form.email']}"/>
        <span class="flashError">#{error 'user_form.email' /}</span><br />

        <label>&{'myspace.user.password'}</label>
        <input type="password" name="user_form.password" value="${flash['user_form.password']}"/>
        <span class="flashError">#{error 'user_form.password' /}</span><br />

        <label>&{'myspace.user.password.repeat'}</label>
        <input type="password" name="user_form.repeat_password" value="${flash['user_form.repeat_password']}"/>
        <span class="flashError">#{error 'user_form.repeat_password' /}</span><br />

        <label>&{'myspace.user.lang.preference'}</label>
        <input id="user_form.prefered_lang.en.id" type="radio" name="user_form.prefered_lang" value="en" #{if flash['user_form.prefered_lang'] == "en" || flash['user_form.prefered_lang'] == null}checked="checked" #{/if} />
               &{'myspace.user.lang.english'}
               <input id="user_form.prefered_lang.zh.id" type="radio" name="user_form.prefered_lang" value="zh" #{if flash['user_form.prefered_lang'] == "zh" }checked="checked" #{/if} />
               &{'myspace.user.lang.simple-chinese'}
               <span class="flashError">#{error 'user_form.prefered_lang' /}</span><br />

        <input type="submit" value="&{'myspace.user.join.submit'}"/>
    </form>

</div>

<a href="@{myspace.user.UserFacade.login()}">Already have an account? Login</a>